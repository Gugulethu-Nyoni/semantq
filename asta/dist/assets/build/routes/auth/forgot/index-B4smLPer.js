import"../../../../modulepreload-polyfill-B5Qt9EMX.js";import{A as h,R as y}from"../../../../config-Cv_0j0S0.js";import"../../../../routes-BLb1p8ki.js";console.log("✅ Forgot Password script initialized");const S={FORGOT_PASSWORD_API:`${h.BASE_URL}/forgot-password`,LOGIN_PAGE:"/login"},c=document.getElementById("forgot-password-form"),d=document.getElementById("reset-email"),i=document.getElementById("auth-status"),p=c.querySelector('button[type="submit"]');function n(e,t=!1){console.log(`UI Status: ${e}`),i.textContent=e,i.className=t?"error":"success",i.classList.remove("hidden")}function l(e){p.disabled=e,p.textContent=e?"Sending...":"Send Reset Link",c.classList.toggle("loading",e)}c.addEventListener("submit",async e=>{e.preventDefault(),console.log("📝 Forgot Password form submission started"),l(!0),i.classList.add("hidden");const t=d.value.trim();if(!t){console.log("❌ Validation failed - email missing"),n("Please enter your email address.",!0),l(!1);return}if(!/\S+@\S+\.\S+/.test(t)){console.log("❌ Validation failed - invalid email format"),n("Please enter a valid email address.",!0),l(!1);return}n("Sending reset link..."),console.log("📧 Attempting to send password reset link for:",t);try{const a=await fetch(S.FORGOT_PASSWORD_API,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t})}),r=await a.json();console.log("Backend response:",r),a.ok?(n(r.message||"If an account with that email exists, a password reset link has been sent."),d.value=""):n(r.message||"Failed to send reset link. Please try again.",!0)}catch(a){console.error("❌ Forgot password request error:",a),n("An unexpected error occurred. Please try again later.",!0)}finally{l(!1)}});d.focus();console.log("📄 Forgot Password form ready");async function w(){console.log("Layout script started");function e(){const t={head:'<head><link rel="stylesheet" href="/auth/css/auth.css" /></head>'};t&&function(r){const s=document.head,u=document.createElement("template");u.innerHTML=r;const m=[];for(s.querySelectorAll("script, link[rel='modulepreload']").forEach(o=>{(o.tagName==="SCRIPT"&&o.type==="module"||o.tagName==="LINK"&&o.rel==="modulepreload"||o.src?.includes("/assets/router-")||o.href?.includes("/assets/modulepreload-polyfill"))&&m.push(o.outerHTML)});s.firstChild;)s.removeChild(s.firstChild);const g=u.content.cloneNode(!0);s.appendChild(g),m.forEach(o=>{const f=document.createElement("template");f.innerHTML=o,s.appendChild(f.content.firstChild)}),console.log("Updated head with layout content while preserving Vite scripts.")}(t.head)}e()}async function P(){console.log(y)}async function E(){try{await new Promise(e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}),console.log("DOM is ready"),await w(),await P()}catch(e){console.error("Error in main function:",e)}}E();
