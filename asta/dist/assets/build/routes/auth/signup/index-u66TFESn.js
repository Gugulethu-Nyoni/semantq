import"../../../../modulepreload-polyfill-B5Qt9EMX.js";import{A as f,R as p}from"../../../../config-Cv_0j0S0.js";import"../../../../routes-BLb1p8ki.js";const l=(e,r)=>{const s=document.createElement("p");s.className="input-error text-red-600 text-sm mt-1",s.textContent=r,e.classList.add("border-red-500"),e.insertAdjacentElement("afterend",s)},h=e=>{e.querySelectorAll(".input-error").forEach(r=>r.remove()),e.querySelectorAll("input").forEach(r=>r.classList.remove("border-red-500"))},u=(e,r,s,t={})=>{const o=t.container||e;o.querySelectorAll(".form-alert").forEach(i=>i.remove());const a=document.createElement("div");return a.className=`form-alert auth-feedback ${s==="error"?"error":"success"}`,a.textContent=r,o.prepend(a),t.dismissAfter&&setTimeout(()=>a.remove(),t.dismissAfter),a};document.querySelector(".password-toggle").addEventListener("click",function(){const e=document.querySelector("#signup-password"),r=e.getAttribute("type")==="password"?"text":"password";e.setAttribute("type",r)});const c=document.getElementById("signupForm"),y=e=>{const r=e.querySelectorAll("input[required]");let s=!0;return h(e),r.forEach(t=>{t.value.trim()?t.type==="email"&&!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(t.value)?(l(t,"Please enter a valid email"),s=!1):t.type==="password"&&t.value.length<8&&(l(t,"Password must be at least 8 characters"),s=!1):(l(t,"This field is required"),s=!1)}),s};c&&c.addEventListener("submit",async e=>{if(e.preventDefault(),!y(c))return;const r=new FormData(c),s=Object.fromEntries(r.entries());try{const t=await fetch(`${f.BASE_URL}/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(s)}),o=await t.json();if(!t.ok)throw new Error(o.message||"Signup failed.");u(c,"Signup successful! Please check your email to confirm your account.","success",{container:document.getElementById("signup-feedback"),dismissAfter:null}),c.classList.add("hidden")}catch(t){u(c,t.message,"error",{container:document.getElementById("signup-feedback"),dismissAfter:5e3})}});async function g(){console.log("Layout script started");function e(){const r={head:'<head><link rel="stylesheet" href="/auth/css/auth.css" /></head>'};r&&function(t){const o=document.head,a=document.createElement("template");a.innerHTML=t;const i=[];for(o.querySelectorAll("script, link[rel='modulepreload']").forEach(n=>{(n.tagName==="SCRIPT"&&n.type==="module"||n.tagName==="LINK"&&n.rel==="modulepreload"||n.src?.includes("/assets/router-")||n.href?.includes("/assets/modulepreload-polyfill"))&&i.push(n.outerHTML)});o.firstChild;)o.removeChild(o.firstChild);const m=a.content.cloneNode(!0);o.appendChild(m),i.forEach(n=>{const d=document.createElement("template");d.innerHTML=n,o.appendChild(d.content.firstChild)}),console.log("Updated head with layout content while preserving Vite scripts.")}(r.head)}e()}async function E(){console.log(p)}async function w(){try{await new Promise(e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}),console.log("DOM is ready"),await g(),await E()}catch(e){console.error("Error in main function:",e)}}w();
