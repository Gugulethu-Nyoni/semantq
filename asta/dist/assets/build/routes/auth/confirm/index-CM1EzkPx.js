import"../../../../modulepreload-polyfill-B5Qt9EMX.js";import{A as y,R as g}from"../../../../config-Cv_0j0S0.js";import"../../../../routes-BLb1p8ki.js";const w=new URLSearchParams(window.location.search),l=w.get("token"),s=document.getElementById("auth-status"),E=document.getElementById("success-actions"),u=document.getElementById("error-actions"),L=document.getElementById("retry-button");function v(e){s.innerHTML=`
        <div class="success-icon">✅</div>
        <p>${e}</p>
      `,s.className="success",E.classList.remove("hidden")}function a(e){s.innerHTML=`
        <div class="error-icon">❌</div>
        <p>${e}</p>
      `,s.className="error",u.classList.remove("hidden")}function m(){if(!l){a("Invalid confirmation link");return}fetch(`${y.BASE_URL}/confirm`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:l})}).then(async e=>{const o=await e.json();if(!e.ok)throw new Error(o.error||"Request failed");return o}).then(e=>{e.success?v(e.message||"Email verified successfully!"):a(e.error||"Email confirmation failed")}).catch(e=>{a(e.message||"An error occurred. Please try again.")})}m();L.addEventListener("click",()=>{s.innerHTML=`
        <div class="spinner"></div>
        <p>Please wait while we try again</p>
      `,s.className="loading",u.classList.add("hidden"),m()});async function C(){console.log("Layout script started");function e(){const o={head:'<head><link rel="stylesheet" href="/auth/css/auth.css" /></head>',footer:'<footer><script type="module" src="/auth/js/confirm.js"><\/script></footer>'};if(o){let p=function(c){const n=document.head,r=document.createElement("template");r.innerHTML=c;const i=[];for(n.querySelectorAll("script, link[rel='modulepreload']").forEach(t=>{(t.tagName==="SCRIPT"&&t.type==="module"||t.tagName==="LINK"&&t.rel==="modulepreload"||t.src?.includes("/assets/router-")||t.href?.includes("/assets/modulepreload-polyfill"))&&i.push(t.outerHTML)});n.firstChild;)n.removeChild(n.firstChild);const f=r.content.cloneNode(!0);n.appendChild(f),i.forEach(t=>{const d=document.createElement("template");d.innerHTML=t,n.appendChild(d.content.firstChild)}),console.log("Updated head with layout content while preserving Vite scripts.")},h=function(c){const n=document.body,r=document.createElement("template");r.innerHTML=c,n.appendChild(r.content.cloneNode(!0))};p(o.head),h(o.footer)}}e()}async function T(){console.log(g)}async function S(){try{await new Promise(e=>{document.readyState==="loading"?document.addEventListener("DOMContentLoaded",e):e()}),console.log("DOM is ready"),await C(),await T()}catch(e){console.error("Error in main function:",e)}}S();
